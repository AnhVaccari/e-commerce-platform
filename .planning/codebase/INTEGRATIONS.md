# External Integrations

**Analysis Date:** 2026-01-23

## APIs & External Services

**Backend API Endpoints:**
- No external third-party APIs integrated
- Application exposes REST API endpoints for frontend consumption:
  - `/api/auth/**` - Authentication endpoints
  - `/api/products/**` - Product catalog endpoints
  - `/api/categories/**` - Category management endpoints
  - `/api/orders/**` - Order management endpoints
  - `/api/users/**` - User management endpoints (admin only)
  - `/h2-console/**` - H2 database console (development only)

**Frontend API Consumption:**
- Backend Base URL: `http://localhost:8080/api`
  - Configured in `ecommerce-frontend/src/app/services/product.service.ts`
  - Service: `ProductService` - Handles product and category data fetching

## Data Storage

**Database:**
- H2 Database (embedded)
  - Type: Embedded relational database (in-memory or file-based)
  - Connection: Configured via Spring Boot auto-configuration
  - Client: Hibernate ORM via Spring Data JPA
  - Repository pattern: `com.anh.e_commerce_platform.repository.*`
    - `UserRepository` - User entity persistence
    - `ProductRepository` - Product entity persistence
    - `OrderRepository` - Order entity persistence
    - `CategoryRepository` - Category entity persistence
    - `OrderItemRepository` - Order item details persistence
  - Tables: users, products, orders, order_items, categories
  - Console Access: `http://localhost:8080/h2-console` (development)

**File Storage:**
- Local filesystem only - No cloud storage integration
- Static assets served from `ecommerce-frontend/public/`

**Caching:**
- None detected - No caching layer (Spring Cache, Redis, etc.)

## Authentication & Identity

**Auth Provider:**
- Custom JWT (JSON Web Token) based authentication
  - Implementation: `com.anh.e_commerce_platform.security.*`
    - `JwtTokenUtil` - Token generation, validation, claim extraction
    - `JwtRequestFilter` - HTTP request filter for token authentication
    - `WebSecurityConfig` - Security configuration and filter chain
    - `UserPrincipal` - Custom user principal for authentication

**Token Details:**
- Algorithm: HMAC-SHA256 (with JJWT library)
- Secret: Configured in `src/main/resources/application.yml` as `jwt.secret`
- Expiration: 24 hours (86400000 milliseconds)
- Signing: `io.jsonwebtoken.Jwts` builder API

**Password Security:**
- BCryptPasswordEncoder - Spring Security BCrypt implementation
- Encoder: `org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder`
- Configuration: `WebSecurityConfig.passwordEncoder()` bean

**Authorization:**
- Role-based access control (RBAC)
- Roles: `USER` (default), `ADMIN`
- Role field: `role` in `User` entity
- Endpoint protection:
  - `/api/auth/**` - Public (unauthenticated access)
  - `/api/products/**` - Public (unauthenticated access)
  - `/h2-console/**` - Public (development only)
  - `/api/users/**` - ADMIN role required
  - All other endpoints - Authenticated users

**User Management:**
- User registration: `/api/auth/register` (POST)
  - Request body: `RegisterRequest` DTO with firstName, lastName, email, password, phone, address
  - Service: `UserService.createUser()`
  - Password hashing: Automatic via UserService

- User login: `/api/auth/login` (POST)
  - Request body: `LoginRequest` DTO with email, password
  - Response: `LoginResponse` with JWT token, user details, and role
  - Service: `AuthController` with `AuthenticationManager`

## Monitoring & Observability

**Error Tracking:**
- None detected - No external error tracking service

**Logs:**
- Standard Spring Boot logging via SLF4J
- Destination: Console output (application logs to stdout)
- No external log aggregation service

**Development Database Console:**
- H2 Web Console at `http://localhost:8080/h2-console`
- JDBC URL: Default H2 connection (configured via Spring Boot)

## CI/CD & Deployment

**Hosting:**
- Not specified - Application can run on any Java-capable host
- Development: Local machine (mvnw run)
- Deployment: Docker, Kubernetes, traditional Java application servers (Tomcat, etc.)

**CI Pipeline:**
- None detected - No CI/CD configuration files (GitHub Actions, GitLab CI, Jenkins, etc.)

**Build Artifacts:**
- Backend: JAR file generated by Spring Boot Maven Plugin
- Frontend: Built Angular application (JavaScript/CSS bundles)

## Environment Configuration

**Required env vars:**
- `jwt.secret` - JWT signing key (required for authentication)
  - Set in: `src/main/resources/application.yml`
  - Current value: `mySecretKeyForPortfolioOnly123456789` (development/demo only)

- `jwt.expiration` - Token expiration time in milliseconds (optional)
  - Set in: `src/main/resources/application.yml`
  - Current value: `86400000` (24 hours)

- Standard Spring Boot properties (optional):
  - `spring.datasource.*` - Database connection (uses H2 auto-config)
  - `spring.jpa.*` - JPA/Hibernate settings
  - `server.port` - Application port (default 8080)

**Secrets location:**
- Development: `src/main/resources/application.yml` (hardcoded JWT secret - NOT for production)
- Production: Environment variables or external secret management (needed)

**Frontend Configuration:**
- API Base URL: Hardcoded in `ecommerce-frontend/src/app/services/product.service.ts`
  - URL: `http://localhost:8080/api`
  - Needs externalization for multi-environment support

## Webhooks & Callbacks

**Incoming:**
- None detected - No webhook endpoints for external service callbacks

**Outgoing:**
- None detected - Application does not call external APIs or send webhooks

## Cross-Origin Support

**CORS Configuration:**
- Frontend origin allowed: `http://localhost:4200`
  - Configured via `@CrossOrigin` annotation on controllers
    - `AuthController`: `@CrossOrigin(origins = "http://localhost:4200")`
    - `ProductController`: `@CrossOrigin(origins = "http://localhost:4200")`
    - Other controllers similarly configured

**Frontend Dev Server:**
- Angular dev server runs on `http://localhost:4200`
- Uses Angular CLI for development mode with hot reload

---

*Integration audit: 2026-01-23*
